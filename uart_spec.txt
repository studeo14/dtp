0::This is a table sentence.
26::The UART (Universal Asynchronous Receiver/Transmitter) core provides serial communication capabilities, which allow communication with modem or other external devices, like another computer using a serial cable and RS232 protocol.
257::This core is designed to be maximally compatible with the industry standard National Semiconductors’ 16550A device.
373::Features:
383::• WISHBONE interface in 32-bit or 8-bit data bus modes (selectable) • FIFO only operation • Register level and functionality compatibility with NS16550A (but not 16450).
553::• Debug Interface in 32-bit data bus mode.
596::This is a table sentence.
622::This is a table sentence.
648::This is a table sentence.
674::Clocks table:
688::This is a table sentence.
714::This is a table sentence.
740::In addition, there are 2 Clock Divisor registers that together form one 16-bit.
820::The registers can be accessed when the 7th (DLAB) bit of the Line Control Register is set to ‘1’.
918::At this time the above registers at addresses 0-1 can’t be accessed.
987::This is a table sentence.
1013::When using 32-bit data bus interface, additional read-only registers are available for debug purposes:
1116::This is a table sentence.
1142::This register allows enabling and disabling interrupt generation by the UART.
1220::This is a table sentence.
1246::Reset Value: 00h
1263::The IIR enables the programmer to retrieve what is the current highest priority pending interrupt.
1362::Bit 0 indicates that an interrupt is pending when it’s logic ‘0’.
1428::When it’s ‘1’ – no interrupt is pending.
1469::The following table displays the list of possible interrupts along with the bits they enable, priority, and their source and reset control.
1609::This is a table sentence.
1635::Bits 4 and 5: Logic ‘0’.
1660::Bits 6 and 7: Logic ‘1’ for compatibility reason.
1710::Reset Value: C1h
1727::The FCR allows selection of the FIFO trigger level (the number of bytes in FIFO required to enable the Received Data Available interrupt).
1866::In addition, the FIFOs can be cleared using this register.
1925::This is a table sentence.
1951::Reset Value : 11000000b
1975::The line control register allows the specification of the format of the asynchronous data communication used.
2085::A bit in the register also allows access to the Divisor Latches, which define the baud rate.
2178::Reading from the register is allowed to check the current settings of the communication.
2267::This is a table sentence.
2293::Reset Value: 00000011b
2316::The modem control register allows transferring control signals to a modem connected to the UART.
2413::This is a table sentence.
2439::This is a table sentence.
2465::This is a table sentence.
2491::The register displays the current state of the modem control lines.
2559::Also, four bits also provide an indication in the state of one of the modem status lines.
2649::These bits are set to ‘1’ when a change in corresponding line has been detected and they are reset when the register is being read.
2781::This is a table sentence.
2807::The divisor latches can be accessed by setting the 7th bit of LCR to ‘1’.
2881::You should restore this bit to ‘0’ after setting the divisor latches in order to restore access to the other registers that occupy the same addresses.
3032::The 2 bytes form one 16-bit register, which is internally accessed as a single number.
3119::You should therefore set all 2 bytes of the register to ensure normal operation.
3200::The register is set to the default value of 0 on reset, which disables all serial I/O operations in order to ensure explicit setup of the register in the software.
3364::The value set should be equal to (system clock speed) / (16 x desired baud rate).
3446::The internal counter starts to work when the LSB of DL is written, so when setting the divisor, write the MSB first and the LSB last.
3580::This register is only available when the core has 32-bit data bus and 5-bit address bus.
3669::It is read only and is provided for debugging purposes of chip testing as it is not part of the original UART16550 device specifications.
3807::Reading from the does not influence core’s bahaviour.
3861::This is a table sentence.
3887::This register is only available when the core has 32-bit data bus and 5-bit address bus.
3976::It is read only and is provided for debugging purposes of chip testing as it is not part of the original UART16550 device specifications.
4114::Reading from the does not influence core’s bahaviour.
4168::This is a table sentence.
4194::This UART core is very similar in operation to the standard 16550 UART chip with the main exception being that only the FIFO mode is supported.
4338::The scratch register is removed, as it serves no purpose.
4396::This core can operate in 8-bit data bus mode or in 32-bit bus mode, which is now the default mode.
4495::The 32-bit mode is fully WISHBONE compatible and it uses the WISHBONE [SEL_I] signal to properly receive and return 8-bit data on 32-bit data bus.
4642::The 8-bit version might have problems in various WISHBONE implementations because a 32-bit master reading from 8-bit bus can expect data on different bytes of the 4-byte word, depending on the register address.
4853::Also, in 32-bit data bus mode, the [ADR_I] is 5 and not 3 bits wide.
4922::In addition, in the 32-bit data bus mode a debug interface is present in the system.
5007::This interface has 2 32-bit registers that can be read to provide non-intrusive look into the core’s registers and other internal values of importance.
5159::The selection between 32- and 8-bits data bus modes is performed by defining DATA_BUS_WIDTH_8 in uart_defines.
5270::v, uart_top.
5283::v or on the compiler/synthesizer tool command line.
5335::Upon reset the core performs the following tasks:
5385::• The receiver and transmitter FIFOs are cleared.
5435::• The receiver and transmitter shift registers are cleared • The Divisor Latch register is set to 0.
5536::• The Line Control Register is set to communication of 8 bits of data, no parity, 1
5620::stop bit.
5630::• All interrupts are disabled in the Interrupt Enable Register.
5694::For proper operation, perform the following:
5739::• Set the Line Control Register to the desired line control parameters.
5811::Set bit 7 to ‘1’ to allow access to the Divisor Latches.
5868::• Set the Divisor Latches, MSB first, LSB next.
5916::• Set bit 7 of LCR to ‘0’ to disable access to Divisor Latches.
5980::At this time the
5997::transmission engine starts working and data can be sent and received.
6067::• Set the FIFO trigger level.
6097::Generally, higher trigger level values produce less
6149::interrupt to the system, so setting it to 14 bytes is recommended if the system responds fast enough.
6251::• Enable desired interrupts by setting appropriate bits in the Interrupt Enable register.
6341::Remember that (Input Clock Speed)/(Divisor Latch value) = 16 x the communication baud rate.
6433::Since the protocol is asynchronous and the sampling of the bits is performed in the perceived middle of the bit time, it is highly immune to small differences in the clocks of the sending and receiving sides, yet no such assumption should be made when calculating the Divisor Latch values.
6723::The core implements the WISNBONE SoC bus interface for communication with the system.
6809::It has an 8-bit data bus for compatibility reason.
6860::The core requires one interrupt.
6893::It requires 2 pads in the chip (serial in and serial out) and, optionally, another six modem control signals, which can otherwise be implemented using general purpose I/Os on the chip.
7078::The block diagram of the core is on the following page.
7134::WISHBONE
7143::bus
7147::Interface
7157::WISHBONE Signals
7174::Modem Signals Logic
7194::Modem control register
7217::Modem Sattus Register
7239::Interrupt Logic
7255::Interrupt Enable Register
7281::Interrupt ID
7294::Register
7303::Trasmitter FIFO
7319::Trasmitter Shift
7336::Register
7345::FIFO Contrrol Register
7368::Receiver FIFO
7382::Receiver Shift
7397::Register
7406::Line Contrrol Register
7429::Li